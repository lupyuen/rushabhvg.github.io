
Hello! Welcome to my blog about my experience with GSOC 2024 mid terms!



# Introduction

I am Rushabh Vipul Gala, studying Computer Science and Engineering at University of Mumbai, India. I love to solve real world challenges, and want to help for the betterment of the world. I have keen interest in new technologies. And I am thrilled to be able to contribute to the Open Source Community throught Google Summer of Code (GSoC).

I was curious about the buzz the around the Rust language. Rust is gaining popularity as a memory safe language. I tried writing some code in Rust. It was a bit difficult in the begining, and afterwards I slowly started to grasp it. And hence started to look around Rust and its applications.

For Google Summer of Code 2024, I am contributing to the Apache's NuttX on the project "PROJECT_TITLE". The aim of this project is to prepare a foundation for the developers to write NuttX apps in Rust language. This project particularly interested me because, I could understand the NuttX ecosystem, and loved Rust. I am excited to write code in Rust, a memory safe language gaining attention worldwide. And contribute to the open source community.

In this blog post, I will share my journey through the mid-term phase of GSoC 2024, highlighting the progress made, challenges encountered, and the invaluable lessons learned along the way. I hope this glimpse into my experience will shed light on the details of the project and also inspire fellow developers and enthusiasts to contribute to Open Source and learn new age technologies.



# Project Overview

My project for Google Summer of Code 2024 is titled [Project Title], and I am working in collaboration with The Apache Software Foundation. The main goal of my project is to port the NuttX Apps from C to Rust, write various Rust wrappers for Unsafe C code. This will contribute to help the developers to code and deploy applications in Rust. The project addresses the issues with Rust Unsafe blocks of code and wrapper functions. This is crucial because traditional C code is vulnerable to memory-based attacks. And, NuttX is a real-time operating system, thus, safety is critical.

By the mid-term evaluation, I aimed to achieve milestones such as implementing C and Rust interoperatibility, presenting at NuttX Workshop, porting the LED Blinky App from C to Rust, deploying LED Blinky on Ox64 BL808 SBC, and adding GPIO and LED drivers for Ox64 BL808 SBC. These milestones are critical as they mark key progress points towards the overall completion of the project.

The tasks completed for the mid-term evaluations are:
- Implement Embedded Rust
- C Interoperability with Embedded Rust (no_std file I/O and ioctl)
- Port the LED Blinky App from C to Rust
- Test Rust Blinky on Ox64 Emulator
- Presentation at NuttX Workshop
- Demo Ox64 Emulator at NuttX Workshop
- Flash Ox64 SBC
- Upstream the GPIO Driver (in C) to NuttX Kernel for Ox64 SBC
- Upstream the LED Driver (in C) to NuttX Kernel for Ox64 SBC

During the first phase of GSoC 2024, I have successfully achieved C and Rust interoperability, and implemented LED Blinky in Rust. This includes implementing file and IOCTL commands in Rust, and converting the LED Blinky App from C to Rust.



# Lessons Learnt and Mentorship

Throughout the development process, I encountered several challenges, one of the major challenges I faced was the Cargo issue. Typically any Rust project uses Cargo for dependency management and builing the files. NuttX developers require careful System Control, and Cargo's automatic dependency handling might not match up with the strict needs of NuttX. To overcome this, we (myself, and my mentor Mr. Lup Yuen Lee) decided to handle eveything manually, i.e. checking and downloading every dependency, linking these dependencies, compiling, and building them together.

Thanks to all this challeges and hurdles, I was able to enhance my proficiency in Rust, C, and programming in general. I have learnt how to download and build the external libraries, compile a Rust application in a real-world situation. I learnt how to document the code, and improved various non-technical skills like Presentation, Pacing, Teamwork, Communication, and how to tackle issues while coding in collaboration. I also learnt about an interesting concept - Code Ownership. Working closely with my mentor and engaging with the open-source community has significantly improved my ability to communicate technical concepts effectively and collaborate efficiently.

I received a lot of help from my mentor, Mr. Lup Yuen Lee. He is a member of Apache NuttX PMC (Project Management Committee). He was a lecturer before joining the Apache NuttX PMC. Through his experience as a lecturer, he has helped me (as a final-year student) in various tasks which might be facile (for an experienced developer), and I sometimes found them a bit sophisticated. His guidance and advice have helped me a lot. In the begining, I was unable to even compile NuttX, he made a step-by step guide on how to build and run NuttX, which actually helped me a lot. Once, I was facing some difficulty in flashing the Ox64 BL808 board, he promptly helped me to flash it.

The NuttX Community is too kind. I was able to solve many of the NuttX-related issues with the help of my mentor, and the community. The developers are friendly to newcomers, helping them promptly.



# Mid-Term Evaluation Experience

I conducted rigorous testing of the implemented features to identify and resolve any potential issues. Additionally, I reviewed my codebase to ensure adherence to coding standards and best practices. I have also ran a automatic code style checking tool, nxstyle, to check and resolve any conflicts with coding standards of NuttX.

During the mid-term evaluation, I received positive feedback from my mentor regarding the successful implementation of features and improvements. He appreciated my work and he was satisfied with my work and the code that I have delivered.

I also received valuable feedback on areas where further optimization and refinement are needed, particularly in my working speed, where my mentor said that I was sometimes progressing too quickly and sometimes I was a bit slower. Overall my speed was good, I just need to speed-up sometimes, and slow-down sometimes. Because of the advice and feedback recieved, we have mututally re-distributed the work/deliverables to match the GSOC timeline.

Moving forward, my primary goal is to create and document the Rust Wrappers. This will help in writing faster and safer NuttX Apps. Also, expand the support for NuttX Apps in Rust to RISC-V 32-bit, RISC-V 64-bit, Arm32 and Arm64 systems. Thus achieving our initial goal of preparing a foundation for other developers to develop and code NuttX Apps in Rust. Beyond GSoC, I aim to continue contributing to the NuttX project as an active member of the open-source community. I plan to collaborate with my mentor to develop more NuttX Apps in Rust, and help other developers worldwide.



# Personal Reflections

Throughout GSoC 2024, I've learned the importance of modular design and clean coding practices. Implementing LED Blinky App taught me more about Rust and C, how embedded systems work, how to call Rust from C, and C from Rust. I have the learnt the importance of dividng the work in smaller parts and completing them in an orderly manner, step by step.

Collaborating with my mentor and engaging with the community has broadened my perspective on teamwork. I've learned to leverage collaborative tools like Git and Discord for effective communication and version control. Personally, GSoC has boosted my confidence in tackling complex technical challenges and handling feedback constructively. It's been a journey of continuous learning and self-improvement.

One of my proudest acheivement is the LED Blinky App in Rust. I faced many difficulties in handling the File I/O and IOCTL operations in Rust. With my mentor's help, I was able to implement these operations, which in turn helped me write the app. I was having some difficulty handling strings and printing them to the console. My findings about the different data types of strings, characters, and pointers in Rust and C, helped me to understand the different ways of calling the console output functions.




Some questions asked by my mentor, Mr Lup Yuen Lee:

_(a) We had a very interesting NuttX International Workshop. What do you think about the NuttX Project and the NuttX Community?_

The NuttX International Workshop was interesting indeed and I came to know and learn a lot about the NuttX Community. I was excited to communicate and talk with other NuttX Developers around the world. Their research and projects left me surprised. I re-learnt how big and amazing the NuttX project actually is. I loved the NuttX workshop and would love to attend more such workshops in the future.

_(b) How was your experience presenting at the NuttX Workshop? Do you think the experience might be helpful for your future career?_

Honestly, this was the first time I had ever presented anything. I was nervous and excited to present in an international workshop. Through my presentation, I was able to explain the community, how we are going to port NuttX Apps from C to Rust. Considering this was my first presentation, I feel it was a good one. And after watching my presentation a few more times, I was able to find the some areas of improvement like, the wordings and pace of speaking. This presentation has boosted my self-confidence to give more presentaions.
And connecting to many experts, has surely helped me progress in my career. Thanks. 

_(c) How do you feel about your First Contribution to NuttX Kernel? What were the challenges that you faced?_

I was feeling very nervous while making my first contribution to NuttX Kernel. As the NuttX Kernel is the core of the NuttX project, I was scared if I would be able to code according to the NuttX standards, and still be able to contribute. We had an issue with another BL808 Driver, and because of it we weren't able to build the LED Blinky app. I was sad, and a bit stressed. After it was resolved, we were able to build the LED Blinky app again. After getting a lot of suggestions from my mentor, I was confident in the code I have written. I was excited to submit my first PR to the NuttX Kernel mainline. I was a lot happier once the pull request got merged.

_(d) Tell us a bit about the Rust Blinky App that you have created for NuttX. What are your impressions of Rust so far?_

The Rust Blinky App is a simple implementation of LED Blinky App, where the user controls an LED through the application. Instead of C, the code was written in Rust for NuttX. The LED is turned on or off from the command line. As we know Rust is a memory safe language, it sometimes gets quite tricky to write the code for handling characters, strings and pointers. Anyways, once we handle these data types carefully, Rust is good. Its memory safety and zero cost abstraction are very helpful while writing performance-critical code.

_(e) What were the challenges you faced while using the Ox64 SBC? Is there anything that NuttX Project (or PINE64) could do better, to make Ox64 programming easier for learners?_

I had many challenges while using the Ox64 SBC. I faced difficulties setting up and flashing NuttX on it. Connecting the Ox64 SBC to laptop was also a bit of a complex task for me. However, I would say that all of these hurdles were just diffcult for me because of my lack of knowledge, and once I got the hang of Ox64 SBC, I was able to connect, set up, and flash NuttX easily. I would just say, more detailed documentation is good for absoulte beginners like me. Everything else works fine because of the NuttX Project, and PINE64's continuous support.

_(f) How are you using the Ox64 Emulator for GSoC? Do you think Ox64 Emulator is a good substitute if Ox64 SBC is unavailable?_

I have set up Ox64 Emulator with the help of TEMU (the tiny emulator). It perfectly does the work. I find it helpful and useful. Yes, I guess Ox64 Emulator is a good substitute if Ox64 SBC is unavailable. We should keep in mind that an emulator is not same the physical hardware. Hence for the deployment and production, we should thoroughly test the program on both: Emulator and Physical Hardware. Because sometimes the same piece of code might not work on the hardware device, even if it works on the emulator.

_(g) We had some Power Outage problems during GSoC. How did you continue working in spite of the outage?_

Yeah, I had power outage during the starting phase. I was quite surprised because of we have almost zero outages. It was challenging as the power outages coincided with my preparation for NuttX Workshop. To deal with it, I used to sleep/relax while the power was gone. Sometimes I studied more about Rust and Embedded System on my mobile phone. Once the power was back on, I used to work on my laptop as long as the battery lasts, continously saving the work, just in case the laptop battery dies and the power goes. And thanks to my mentor, Mr. Lee, who helped and coordinated with me, I was able to handle the power outages and still be able to contribute to the NuttX Project. 

_(h) Is there anything that NuttX Project can help, so new devs can get onboard NuttX quicker?_

NuttX Project is very big and complex to understand and learn. And, I would just say that, a beginner/starter's guide is good for the new devs who want to get onboard NuttX. I think a beginner's guide should just cover the high-level structure of the Project, for example, which functionality is inside where, the current issues and how they are handled. Even without this guide, the devs can get onboard NuttX Project because of the versatile and friendly community.

_(i) Would you recommend GSoC and NuttX to your fellow students?_ 

Yes, I would highly recommend my fellow students to join GSoC and NuttX. I am keen to promote open-source contribution, helping my fellow students learn about coding and programming. I will guide them towards the open-source world through various programs like Google Summer of Code and other such programmes. GSoC and NuttX Project has helped boost my self-confidence, showcasing my coding capabilites to the world.



# Acknowledgments

I would like to thank everyone who has helped and supported me during the GSoC period.

I am also grateful to Mahadev, Bhagwan Vishnu, and all the gods and goddesses for granting me this opportunity, and guiding me through this journey.

I am incredibly grateful to Mr. Lup Yuen Lee for his continuous support, patience and invaluable guidance throughout the project. His expertise and encouragement were instrumental in shaping my understanding and my skills in embedded systems.

A special thank you to the Apache Software Foundation for providing me with this amazing opportunity to participate in GSoC. The resources and community at the Apache Software Foundation were essential in helping me achieve my goals and my growth as a developer.

I extend my thanks to Alan Carvalho de Assis, Tomasz Cedro, Xiang Xiao, Alin Jerpelea, Saurav Pal and others for their assistance and encouragement during challenging phases of the project. Their feedback and advice significantly contributed to the success of the project.

I would also like to thank my family and friends for their unwavering support and understanding throughout this journey.

Finally I am grateful to Google, Stephanie and Lucila (GSoC Admins) for organizing the 20th Google Summer of Code, and for providing a platform for students like me to learn and contribute to open-source projects.

Thank you once again to everyone who made this experience enriching and unforgettable.
